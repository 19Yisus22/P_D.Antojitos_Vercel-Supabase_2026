<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual del Admin | D'Antojitos©</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='uploads/logo.ico') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_manual.css') }}">
    <style>
        .btn-back-home {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: #ff4d4d;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, background-color 0.3s ease;
            z-index: 1000;
        }
        .btn-back-home:hover {
            transform: scale(1.1);
            background-color: #e60000;
            color: white;
        }
        .btn-back-home i {
            font-size: 24px;
        }
    </style>
</head>
<body>

    {% if session.get('user_id') and session.get('rol') == 'admin' %}

    <a href="/inicio" class="btn-back-home" title="Volver al Panel de Inicio">
        <i class="bi bi-house-fill"></i>
    </a>

    <div class="wrapper">
        <aside>
            <h1>Manual</h1>
            <div class="nav-item active" onclick="showSection('inicio')"><i class="bi bi-house-door"></i> <span>Inicio</span></div>
            <div class="nav-item" onclick="showSection('perfil')"><i class="bi bi-person-badge"></i> <span>Mi Perfil</span></div>
            <div class="nav-item" onclick="showSection('productos')"><i class="bi bi-box-seam"></i> <span>Productos</span></div>
            <div class="nav-item" onclick="showSection('pedidos')"><i class="bi bi-cart-check"></i> <span>Pedidos</span></div>
            <div class="nav-item" onclick="showSection('publicidad')"><i class="bi bi-megaphone"></i> <span>Publicidad</span></div>
            <div class="nav-item" onclick="showSection('facturacion')"><i class="bi bi-credit-card"></i> <span>Facturación</span></div>
        </aside>

        <main>
            <div id="inicio" class="content-section active">
                <h2><i class="bi bi-speedometer2"></i> Manual del Administrador</h2>
                <p>Bienvenido al manual interactivo de nuestra plataforma web <strong>D'Antojitos©</strong>. Aprende a gestionar tu sistema de forma profesional.</p>
                <div class="card-grid">
                    <div class="card">
                        <h3><i class="bi bi-lightning-charge"></i> Sincronización</h3>
                        <p>Toda modificación en productos, pedidos o publicidad se refleja en tiempo real en la tienda virtual.</p>
                    </div>
                    <div class="card">
                        <h3><i class="bi bi-shield-lock"></i> Seguridad</h3>
                        <p>El sistema protege tus datos. Asegúrate de cerrar tu sesión si compartes el equipo de trabajo.</p>
                    </div>
                </div>
            </div>

            <div id="perfil" class="content-section">
                <h2><i class="bi bi-person-circle"></i> Mi Perfil y Usuarios</h2>
                <div class="card">
                    <h3>Gestión de Usuarios</h3>
                    <p>Visualiza la lista completa de clientes registrados. Como Administrador Principal, tienes facultades especiales:</p>
                    <ul>
                        <li>Seleccionar hasta un máximo de <strong>3 administradores</strong> adicionales.</li>
                        <li>Al asignar el rol de Admin, el usuario podrá gestionar productos, pedidos, publicidad y facturación.</li>
                    </ul>
                </div>
            </div>

            <div id="productos" class="content-section">
                <h2><i class="bi bi-box-seam"></i> Gestión de Productos</h2>
                <div class="card">
                    <h3>Control de Inventario</h3>
                    <p>Este módulo permite operaciones CRUD completas:</p>
                    <ul>
                        <li><strong>Crear:</strong> Añade nuevos items con nombre, descripción y precio.</li>
                        <li><strong>Editar:</strong> Actualiza información de productos existentes.</li>
                        <li><strong>Eliminar:</strong> Remueve items que ya no deseas comercializar.</li>
                    </ul>
                </div>
            </div>

            <div id="pedidos" class="content-section">
                <h2><i class="bi bi-cart-check"></i> Gestión de Pedidos</h2>
                <div class="card">
                    <h3>Flujo de Trabajo y Prioridad</h3>
                    <ul>
                        <li><strong>Orden:</strong> Listado del más reciente al antiguo por secciones (Pendientes, Finalizados, Cancelados).</li>
                        <li><strong>Fijar:</strong> Botón de anclaje para pedidos de alta prioridad.</li>
                        <li><strong>Buscador:</strong> Filtro por nombre, documento o número de factura.</li>
                    </ul>
                </div>
                <div class="card-grid">
                    <div class="card">
                        <h3>Detalle de Factura</h3>
                        <ul>
                            <li>Fecha, hora y datos del cliente.</li>
                            <li><strong>Columna de Pagos:</strong> Botón Verde (Pago) / Rojo (Pendiente).</li>
                            <li>Select-list para Estado de Entrega (Pendiente, Enviado, Finalizado, Anulado).</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>Lógica de Estados</h3>
                        <p>Para <strong>Finalizar</strong>: Todos los items marcados como pagos y entrega en "Finalizado".</p>
                        <p>Al seleccionar <strong>Anulado</strong>, el cliente verá el estado de su factura actualizado al instante.</p>
                    </div>
                </div>
            </div>

            <div id="publicidad" class="content-section">
                <h2><i class="bi bi-megaphone"></i> Gestión de Publicidad</h2>
                <div class="card">
                    <h3>Marketing Digital</h3>
                    <ul>
                        <li><strong>Notificaciones:</strong> Mensajes globales (Solo crear/eliminar).</li>
                        <li><strong>Carrusel e Info-Cards:</strong> Ubicadas en Inicio. Soportan <em>Drag & Drop</em>.</li>
                        <li><strong>Cinta Publicitaria:</strong> Banner exclusivo del Catálogo.</li>
                    </ul>
                </div>
                <div class="alert">
                    <i class="bi bi-display"></i>
                    <span>Usa el <strong>Previsualizador</strong> para verificar el renderizado antes de publicar.</span>
                </div>
            </div>

            <div id="facturacion" class="content-section">
                <h2><i class="bi bi-credit-card"></i> Zona de Facturación</h2>
                <div class="card">
                    <h3>Canales de Pago</h3>
                    <p>Gestión de transferencias para Nequi, Bancolombia, Daviplata y Nubank.</p>
                    <ul>
                        <li>Configura el <strong>QR</strong>, cuenta, titular y entidad financiera.</li>
                        <li>Recuerda presionar "Agregar a lista" y luego <strong>"Guardar Canales de Pago"</strong>.</li>
                    </ul>
                </div>
            </div>
        </main>
    </div>

    <footer>
        <a href="/inicio">
            <img src="{{ url_for('static', filename='uploads/logo.ico') }}" alt="Logo" class="app-badge">
        </a>
        <div class="copyright-text">2025 D'Antojitos© - Todos los derechos reservados</div>
        <div class="author-credit">Created By: 2022 Yisus™</div>
    </footer>

    {% else %}
        {% include 'blocked_html.html' %}
    {% endif %}

    <script>
        function showSection(sectionId) {
            const sections = document.querySelectorAll('.content-section');
            const navItems = document.querySelectorAll('.nav-item');

            sections.forEach(section => {
                section.classList.remove('active');
            });

            navItems.forEach(item => {
                item.classList.remove('active');
                if(item.getAttribute('onclick').includes(sectionId)) {
                    item.classList.add('active');
                }
            });

            document.getElementById(sectionId).classList.add('active');
        }
    </script>
</body>
</html>